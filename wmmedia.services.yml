services:
    wmmedia.form_alter.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaFormAlterSubscriber
        arguments:
            - '@current_user'
        tags: [{ name: event_subscriber }]

    wmmedia.delete_form_alter.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaDeleteFormAlterSubscriber
        arguments:
            - '@wmmedia.reference_discovery'
        tags: [{ name: event_subscriber }]

    wmmedia.media_entity.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaEntitySubscriber
        arguments:
            - '@messenger'
            - '@wmmedia.reference_discovery'
        tags: [{ name: event_subscriber }]

    wmmedia.media_widget.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaWidgetSubscriber
        arguments:
            - '@entity_type.manager'
            - '@imgix.manager'
        tags: [{ name: event_subscriber }]

    wmmedia.collection_route.subscriber:
        class:  Drupal\wmmedia\EventSubscriber\CollectionRouteSubscriber
        tags: [{ name: event_subscriber }]

    wmmedia.entity_form_display.subscriber:
        class:  Drupal\wmmedia\EventSubscriber\EntityFormDisplaySubscriber
        tags: [{ name: event_subscriber }]

    wmmedia.filter:
        class: Drupal\wmmedia\Service\MediaFilterService
        arguments:
            - '@entity_field.manager'
            - '@database'

    wmmedia.file.repository:
        class: Drupal\wmmedia\Service\FileRepository
        arguments:
            - '@database'
            - '@entity_field.manager'

    wmmedia.file.form_builder:
        class: Drupal\wmmedia\Service\FileOverviewFormBuilder
        arguments:
            - '@wmmedia.file.repository'
            - '@entity_type.manager'
            - '@request_stack'
            - '@current_route_match'

    wmmedia.usage:
        class: Drupal\wmmedia\Service\UsageManager
        arguments:
            - '@entity_field.manager'
            - '@entity_type.manager'
            - '@entity_type.bundle.info'
            - '@database'
            - '@queue'
            - '@wmmedia.usage.repository'

    wmmedia.usage.repository:
        class: Drupal\wmmedia\Service\UsageRepository
        arguments:
            - '@database'

    wmmedia.usage.subscriber.entity:
        class: Drupal\wmmedia\EventSubscriber\MediaUsageEntitySubscriber
        arguments:
            - '@wmmedia.usage'
        tags: [{ name: event_subscriber }]

    wmmedia.usage.subscriber.form:
        class: Drupal\wmmedia\EventSubscriber\MediaUsageFormAlterSubscriber
        arguments:
            - '@wmmedia.usage'
        tags: [{ name: event_subscriber }]

    wmmedia.delete.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaDeleteSubscriber
        tags: [{ name: event_subscriber }]

    wmmedia.reference_discovery:
        class: Drupal\wmmedia\Service\MediaReferenceDiscovery
        arguments:
            - '@entity_type.manager'
            - '@entity_field.manager'
            - '@entity_type.bundle.info'
            - '@module_handler'
            - '@event_dispatcher'

    wmmedia.form.media_file_inline_entity_form_alter.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaFileInlineEntityFormAlter
        tags: [{ name: event_subscriber }]

