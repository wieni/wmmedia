services:
    wmmedia.file.repository:
        class: Drupal\wmmedia\Service\FileRepository
        arguments:
            - '@database'
            - '@entity_field.manager'

    wmmedia.file.form_builder:
        class: Drupal\wmmedia\Service\FileOverviewFormBuilder
        arguments:
            - '@wmmedia.file.repository'
            - '@entity_type.manager'
            - '@request_stack'
            - '@current_route_match'

    wmmedia.usage:
        class: Drupal\wmmedia\Service\UsageManager
        arguments:
            - '@entity_field.manager'
            - '@entity_type.manager'
            - '@entity_type.bundle.info'
            - '@database'
            - '@queue'
            - '@wmmedia.usage.repository'

    wmmedia.usage.repository:
        class: Drupal\wmmedia\Service\UsageRepository
        arguments:
            - '@database'

    wmmedia.usage.subscriber.entity:
        class: Drupal\wmmedia\EventSubscriber\MediaUsageEntitySubscriber
        arguments:
            - '@wmmedia.usage'
        tags: [{ name: event_subscriber }]

    wmmedia.usage.subscriber.form:
        class: Drupal\wmmedia\EventSubscriber\MediaUsageFormAlterSubscriber
        arguments:
            - '@wmmedia.usage'
        tags: [{ name: event_subscriber }]

    wmmedia.delete.subscriber:
        class: Drupal\wmmedia\EventSubscriber\MediaDeleteSubscriber
        tags: [{ name: event_subscriber }]

    wmmedia.entity_browser.modal.subscriber:
        class: Drupal\wmmedia\EventSubscriber\EntityBrowserModalFormSubscriber
        tags: [{ name: event_subscriber }]
